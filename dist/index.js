(()=>{var __webpack_modules__={607:module=>{module.exports=eval("require")("@actions/core")},956:module=>{module.exports=eval("require")("@actions/github")},398:module=>{module.exports=eval("require")("graphql-schema-diff")},147:e=>{"use strict";e.exports=require("fs")},17:e=>{"use strict";e.exports=require("path")}};var __webpack_module_cache__={};function __nccwpck_require__(e){var n=__webpack_module_cache__[e];if(n!==undefined){return n.exports}var o=__webpack_module_cache__[e]={exports:{}};var r=true;try{__webpack_modules__[e](o,o.exports,__nccwpck_require__);r=false}finally{if(r)delete __webpack_module_cache__[e]}return o.exports}if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var __webpack_exports__={};(()=>{const{getInput:e,info:n,debug:o,setFailed:r}=__nccwpck_require__(607);const{context:s,getOctokit:_}=__nccwpck_require__(956);const{getDiff:t}=__nccwpck_require__(398);const{join:a}=__nccwpck_require__(17);const{writeFile:i}=__nccwpck_require__(147);const c=e("header");function resolveHome(e){if(e!=null&&e!==""&&e[0]==="~"){return a(process.env.HOME,e.slice(1))}return e}const u=resolveHome(e("old-schema"));const l=resolveHome(e("new-schema"));const p=resolveHome(e("output-path"));t(u,l).then((async o=>{const{repo:{owner:r,repo:t},payload:{pull_request:{number:a}}}=s;const u=_(e("token"));const{data:l}=await u.issues.listComments({owner:r,repo:t,issue_number:a});n(JSON.stringify(l,null,2));const m=l.find((e=>e.body.startsWith(c)));if(o){const e=o.breakingChanges.length===0?"":`\n### 🚨 Breaking Changes \n${o.breakingChanges.map((e=>" - "+e.description)).join("\n")}\n        `;const n=o.dangerousChanges.length===0?"":`\n### ⚠️ Dangerous Changes\n${o.dangerousChanges.map((e=>" - "+e.description)).join("\n")}\n        `;const s=`${c}\n\n<details>\n<summary>\nView schema changes\n</summary>\n\n\`\`\`diff\n${o.diffNoColor.split("\n").slice(2).join("\n")}\n\`\`\`\n</details>\n\n${e}\n${n}\n        `;if(p!=null&&p!==""){i(p,s)}if(m){await u.issues.updateComment({owner:r,repo:t,comment_id:m.id,body:s})}else{await u.issues.createComment({owner:r,repo:t,issue_number:a,body:s})}}else{n("No schema changes.");if(m){await u.issues.deleteComment({owner:r,repo:t,comment_id:m.id});n("Deleted comment.")}}})).catch((e=>{o(e.stack);r(e)}))})();module.exports=__webpack_exports__})();