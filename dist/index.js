(()=>{var __webpack_modules__={607:module=>{module.exports=eval("require")("@actions/core")},956:module=>{module.exports=eval("require")("@actions/github")},398:module=>{module.exports=eval("require")("graphql-schema-diff")}};var __webpack_module_cache__={};function __nccwpck_require__(e){var n=__webpack_module_cache__[e];if(n!==undefined){return n.exports}var r=__webpack_module_cache__[e]={exports:{}};var o=true;try{__webpack_modules__[e](r,r.exports,__nccwpck_require__);o=false}finally{if(o)delete __webpack_module_cache__[e]}return r.exports}(()=>{__nccwpck_require__.r=e=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})}})();if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var __webpack_exports__={};(()=>{"use strict";__nccwpck_require__.r(__webpack_exports__);var e=__nccwpck_require__(607);var n=__nccwpck_require__(956);var r=__nccwpck_require__(398);const o=require("path");const t=require("node:fs");const _=(0,e.getInput)("header");function resolveHome(e){if(e!=null&&e!==""&&e[0]==="~"){return(0,o.join)(process.env.HOME,e.slice(1))}return e}const a=resolveHome((0,e.getInput)("old-schema"));const s=resolveHome((0,e.getInput)("new-schema"));const i=resolveHome((0,e.getInput)("output-path"));(0,r.getDiff)(a,s).then((async r=>{const{repo:{owner:o,repo:a},payload:{pull_request:{number:s}}}=n.context;const u=(0,n.getOctokit)((0,e.getInput)("token"));const{data:c}=await u.issues.listComments({owner:o,repo:a,issue_number:s});(0,e.info)(JSON.stringify(c,null,2));const l=c.find((e=>e.body.startsWith(_)));if(r){const e=r.breakingChanges.length===0?"":`\n### 🚨 Breaking Changes \n${r.breakingChanges.map((e=>" - "+e.description)).join("\n")}\n        `;const n=r.dangerousChanges.length===0?"":`\n### ⚠️ Dangerous Changes\n${r.dangerousChanges.map((e=>" - "+e.description)).join("\n")}\n        `;const c=`${_}\n\n<details>\n<summary>\nView schema changes\n</summary>\n\n\`\`\`diff\n${r.diffNoColor.split("\n").slice(2).join("\n")}\n\`\`\`\n</details>\n\n${e}\n${n}\n        `;if(i!=null&&i!==""){(0,t.writeFile)(i,c)}if(l){await u.issues.updateComment({owner:o,repo:a,comment_id:l.id,body:c})}else{await u.issues.createComment({owner:o,repo:a,issue_number:s,body:c})}}else{(0,e.info)("No schema changes.");if(l){await u.issues.deleteComment({owner:o,repo:a,comment_id:l.id});(0,e.info)("Deleted comment.")}}})).catch((n=>{(0,e.debug)(n.stack);(0,e.setFailed)(n)}))})();module.exports=__webpack_exports__})();